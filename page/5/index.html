<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Yun's博客 - 致奋斗的自己</title><meta name="keywords" content="云"><meta name="author" content="云若无"><meta name="copyright" content="云若无"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="还记得自己的梦想吗？！！！">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta property="og:type" content="website">
<meta property="og:title" content="Yun&#39;s博客">
<meta property="og:url" content="https://yunruowu.github.io/page/5/index.html">
<meta property="og:site_name" content="Yun&#39;s博客">
<meta property="og:description" content="还记得自己的梦想吗？！！！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yunruowu.github.io/img/15.png">
<meta property="article:author" content="云若无">
<meta property="article:tag" content="云">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yunruowu.github.io/img/15.png"><link rel="shortcut icon" href="/img/yun-16x16.png"><link rel="canonical" href="https://yunruowu.github.io/page/5/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"OOJ4HQ9JII","apiKey":"f8b9117ce6099bb80d5ff838dca80653","indexName":"YunBlog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Yun\'s博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-07-27 00:03:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><meta name="generator" content="Hexo 5.4.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/15.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">91</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">62</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yun's博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Yun's博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/yunruow" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:mcdxwan@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/08/03/BFRP-Endpoint-Congestion-Avoidance-Through-Bilateral-Flow-Reservation/" title="BFRP: Endpoint Congestion Avoidance Through Bilateral Flow Reservation">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BFRP: Endpoint Congestion Avoidance Through Bilateral Flow Reservation"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/08/03/BFRP-Endpoint-Congestion-Avoidance-Through-Bilateral-Flow-Reservation/" title="BFRP: Endpoint Congestion Avoidance Through Bilateral Flow Reservation">BFRP: Endpoint Congestion Avoidance Through Bilateral Flow Reservation</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-08-03T07:53:20.000Z" title="发表于 2020-08-03 15:53:20">2020-08-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/HiNA/">HiNA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/">Papers</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/">拥塞控制</a></span></div><div class="content"> <!-- hexo-inject:begin --><!-- hexo-inject:end -->Bilateral Flow Reservation Protocol，BFRP
​		与基于数据包的调度机制不同，BFRP通过调度流来避免拥塞。我们的设计基于SRP的调度策略。流完成时间与大流和小流的发送顺序有关。首先安排小流量可以减少平均流量完成时间。但是，当调度程序每次选择最小流量时，大流量可能会饿死。为了避免这种情况，我们为每个流设置优先级p，并且p等于流大小。每次调度程序对流进行舍入时，p的值都会减少d。当大流量四舍五入时，p的值将变得非常小，调度程序每次都会选择具有最小p的流量，以避免出现饥饿的情况。
​		图3显示了BFRP的过渡过程。在一个节点中，整个过程分为三种状态：SPECa，SPECb和NORMAL。如果网络没有拥塞，则BFRP将不会进入NORMAL状态。  SPECa状态是BFRP中发送方的初始状态。首先，发送方将选择具有最小p的流，并将推测性数据包发送到网络中。当发送方收到否定确认数据包（NACK）时，它将发送y预留数据包到目标，然后进入SPECb状态。但是，在SPECb状态下，如果发送方在预留数据包发送开始到授权时间到达之间的时间内未执行任何操作，则会急剧 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/07/29/Network-Endpoint-Congestion-Control-for-Fine-Grained-Communication/" title="Network Endpoint Congestion Control for Fine-Grained Communication">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Network Endpoint Congestion Control for Fine-Grained Communication"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/29/Network-Endpoint-Congestion-Control-for-Fine-Grained-Communication/" title="Network Endpoint Congestion Control for Fine-Grained Communication">Network Endpoint Congestion Control for Fine-Grained Communication</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-29T14:53:54.000Z" title="发表于 2020-07-29 22:53:54">2020-07-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/HiNA/">HiNA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/">Papers</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/">拥塞控制</a></span></div><div class="content"> 需要快速的响应时间和较低的开销
Small-Message Speculative Reservation Protocol
SMSRP基于以下观察结果：如果端点没有拥塞，则无需为每个消息进行预留握手。与SRP协议会在每次消息传输之前急于启动保留的协议不同，SMSRP仅在通过推测性消息的丢弃在端点检测到拥塞之后才发布保留。

图详细显示了SMSRP的操作。在此示例中，网络源正在将两个小消息M1和M2发送到可能拥塞的端点。每个消息足够小以适合单个网络数据包。消息准备好后，源将以推测模式立即将其发送。与SRP中的推测模式相似，推测消息使用低优先级VC，并且在发生拥塞时可以被网络丢弃。如果推测传输成功，例如在M1的肯定确认A1指示的情况下，则不需要保留。结果，当端点没有拥塞时，SMSRP几乎不会在网络中产生任何开销。
如果网络端点拥塞，则经过一段时间的排队延迟后，网络将丢弃推测性消息，就像消息M2一样。网络交换机将相应的NACK发送回源。当消息源收到NACK时，它将启动到目的地的预留Res2，以获取消息的重传时间。在从目的地接收到授权Gnt $t_2$之后，源将等待直到分配的传输时间$t_ ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/07/29/Network-Congestion-Avoidance-Through-Speculative-Reservation/" title="Network Congestion Avoidance Through Speculative Reservation">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Network Congestion Avoidance Through Speculative Reservation"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/29/Network-Congestion-Avoidance-Through-Speculative-Reservation/" title="Network Congestion Avoidance Through Speculative Reservation">Network Congestion Avoidance Through Speculative Reservation</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-29T08:37:33.000Z" title="发表于 2020-07-29 16:37:33">2020-07-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/HiNA/">HiNA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/">Papers</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/HiNA/Papers/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/">拥塞控制</a></span></div><div class="content"> 
SRP，Speculative Reservation Protocol，投机预约协议。
协议通过以下方式提高了拥塞控制的最新水平：


SRP防止拥塞的形成，而不是在拥塞发生后对其进行反应。


SRP具有非常快速的瞬态响应，与易发生拥塞的流量的发生几乎立即做出反应，相比之下，像ECN这样的数据包标记协议需要数百微秒的响应时间。


SRP的开销很低，可以与网络媲美，而不会对良性流量进行拥塞控制。


SRP提高了争夺网络热点的来源之间的公平性。
阻塞案例：拥塞的扩散影响。




解决拥塞的办法：


ECN



启用ECN的路由器通过监视其输入或输出缓冲区的占用来检测拥塞。当缓冲区的占用率超过某个阈值时，路由器会标记通过缓冲区的数据包的ECN字段（在某些系统中，标记操作仅在标识为拥塞根源的端口上进行）。当标记的数据包到达其目的地时，ECN字段将使用拥塞通知数据包返回到数据包的源。发送方收到消息后会减缓发送速率，来缓解拥塞。在没有拥塞通知的情况下，发送方将逐渐提高其注入速率，以充分利用未拥塞网络的带宽。


Speculative Reservation Protocol
预 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/07/29/Interconnection-Networks-ch7/" title="Interconnection-Networks-ch7">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Interconnection-Networks-ch7"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/29/Interconnection-Networks-ch7/" title="Interconnection-Networks-ch7">Interconnection-Networks-ch7</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-29T03:49:18.000Z" title="发表于 2020-07-29 11:49:18">2020-07-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> CHAPTER 7 Slicing and Dicing
我们首先看concentrators and distributors。集中器将多个终端节点的流量组合到单个网络通道上。当来自任何终端的流量很小以充分利用网络通道时，可以使用它们。它们还可以有效地组合来自许多突发性终端的流量。当峰值流量与平均流量之比较大时，使用集中器可降低序列化延迟，并降低网络成本。
</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/07/28/Interconnection-Networks-ch6/" title="Interconnection-Networks-ch6">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Interconnection-Networks-ch6"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/28/Interconnection-Networks-ch6/" title="Interconnection-Networks-ch6">Interconnection-Networks-ch6</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-28T04:25:20.000Z" title="发表于 2020-07-28 12:25:20">2020-07-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> Non-Blocking Networks

如果网络可以处理输入和输出排列的所有电路请求，则称该网络为非阻塞网络。即，可以形成从每个输入到其选择的输出的专用路径，而没有任何冲突（共享通道）。相反，如果网络无法处理所有此类电路请求而没有冲突，则它就是阻塞网络.
两种类型的非阻塞网络。strictly non-blocking, rearrangeably non-blocking
首先，如果可以每次一个电路递增地设置任何排列，而无需重新路由（或重新排列）任何已设置的电路，则网络严格不阻塞。如果可以将任何未使用的输入连接到任何未使用的输出，而无需更改任何其他流量所采用的路径，则说明网络完全是无阻塞的。
相反，如果网络可以路由电路进行任意排列，则网络可重新排列为非阻塞（或简单地可重新排列），但是排列的渐进式构造可能需要重新布置一些早期电路，以允许以后建立电路。可重新排列的网络可以将任何未连接的输入连接到任何未连接的输出，但是可能需要重新路由一些不相关的流量才能建立连接。
6.1 Non-Blocking vs. Non-Interfering Networks
分组交换网络中，资源分配好 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/07/20/Interconnection-Networks-ch5-1/" title="Interconnection-Networks-ch5-1">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Interconnection-Networks-ch5-1"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/20/Interconnection-Networks-ch5-1/" title="Interconnection-Networks-ch5-1">Interconnection-Networks-ch5-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-20T07:21:59.000Z" title="发表于 2020-07-20 15:21:59">2020-07-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> Torus Network
5.3 Building Mesh and T orus Networks
将网络的抽象节点映射到物理空间中的实际位置，不同的封装技术可以实现一维的，二维的等映射。


最简单的方式就是$p_i=a_i$，物理位置和逻辑地址相同，每个节点之间距离相同。


但是这将导致$p_k和p_0$之间距离过大，如此长的信道可能导致过多的等待时间或需要较慢的信令速率。所以提出折叠的环形网络来解决问题。一种环形网络的折叠入下：

消灭了 最长的网络，但是牺牲了以相邻节点距离短的优点。


最终的物理放置图对比：

通常，通过以折叠顺序组合k个折叠的k-ary n-1cube来构造折叠的k-ary n-cube

当逻辑维数超过物理维数时，必须将几个逻辑维映射到每个物理维中。如果物理维数为q，则直接映射是将逻辑维的q折叠为每个物理维。


Express Cubes
原因：环状网络通道短，$t_c$时间通常由$t_r$决定，与直径小的网络相比，导致更多的$T_H$。可以增加维度减小直径。但是会导致$T_s$增大。

所以Express sube出现了。就是添加了几个快速通 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/07/20/Interconnection-Networks-ch5/" title="LeetCode-10">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode-10"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/20/Interconnection-Networks-ch5/" title="LeetCode-10">LeetCode-10</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-20T07:21:59.000Z" title="发表于 2020-07-20 15:21:59">2020-07-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> CH4 Torus Networks
圆环和网状网络（ k-ary n-cubes）在规则的n维网格中打包$N=k^n$个节点，每个维中都有k个节点，并且最近邻之间有通道。
优点：

这种规则的物理布置与包装约束非常匹配。
具有良好的路径分集，即使在排列流量上也可以具有良好的负载平衡。
通道是双向的,可以利用双向信令，从而更有效地利用引脚和电线。

缺点：

它们的跳数比对数网络大；
增加了网络的引脚成本。

4.1The Structure of T orus Networks

$N=k^n$个节点
每个维中都有k个节点
每个节点同时充当网络的输入端，输出端和交换节点
每个节点被分配一个n-digit radix-k地址{an−1,…,a0}
通过一对通道（每个方向一个）连接到地址相差±1（mod k）的所有节点。只需一个地址位。
每个节点每个维度需要2个通道，总共2nN个通道。

规则的（所有节点的度数相同），并且也是边缘对称的。
网状网络和环状网络的区别：

网状网络 在每个方向上都省略了从地址ak−1到地址a0的连接
网状网络具有相同的节点度，但是对等通道的数目是具有相同基 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/07/19/Interconnection-Networks-ch3/" title="Interconnection-Networks-ch4.md">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Interconnection-Networks-ch4.md"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/19/Interconnection-Networks-ch3/" title="Interconnection-Networks-ch4.md">Interconnection-Networks-ch4.md</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-19T02:02:37.000Z" title="发表于 2020-07-19 10:02:37">2020-07-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> Butterfly Networks
俩个主要的拓扑家族

蝶形网络是最基本的间接网络。
对于交换机度数为$\delta = 2k, H = \log_kN +1$的N个节点的网络，BN拥有最小的直径。
缺点：

no path diversity: there is exactly one route from each source node to each destination node.
the butterfly cannot be realized without long wires that must traverse at least half the diameter of the machine.

4.1The Structure of Butterfly Networks
k-ary n-fly

2-ary 4-fly

​	k-ary n-fly网络由$k^n$个源终端节点，n个阶段, 每个阶段$k^{n-1}$ k×k crossbar switch节点以及最后$k^n$目的地终端节点组成。


​	关于网络中报文的走向问题。
根据每一个发出报文的终 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/07/09/Interconnection-Networks-ch2/" title="Interconnection_Networks-ch2">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Interconnection_Networks-ch2"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/09/Interconnection-Networks-ch2/" title="Interconnection_Networks-ch2">Interconnection_Networks-ch2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-09T02:30:22.000Z" title="发表于 2020-07-09 10:30:22">2020-07-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Interconnection-Networks/">Interconnection_Networks</a></span></div><div class="content"> CH2 A Simple Interconnection Network
2.1网络规范和限制
​	有关网络设备的规范和约束，规范比如端口数量，传输速率。约束有关带宽，消耗。
2.2拓扑
​	蝶形网络拓扑

​	speedup 加速比 网络总输入带宽与网络理想容量的比值。也被称为蝶形基数。
2.5路由器

路由器的数据路径包括四个18位输入寄存器，四个18位4：1多路复用器，四个移位器（用于移位标头phits的路由字段）和四个18位输出寄存器。数据路径由144位寄存器和大约650个门（等效于2个输入NAND）组成。
Allocator

分配器由四个几乎相同的位片组成，每个位片分为三个部分：解码，仲裁和保持。
在解码部分中，对每个输入phit的高四位进行解码。每个解码器生成两个信号。如果输入i是一个head phit并且路由字段的高两位与输出端口号匹配，则信号i请求为true。此信号指示输入phit请求使用此头phit开始使用输出端口路由数据包。如果输入i上的点是有效载荷点，则解码器还会生成信号有效载荷i。分配器的保持逻辑使用此信号在数据包持续时间内保持信道（只要有效载荷位在所选输入 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/07/04/%E4%B9%A6%E7%94%9F/" title="书生">     <img class="post_bg" src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="书生"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/04/%E4%B9%A6%E7%94%9F/" title="书生">书生</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-04T15:20:53.000Z" title="发表于 2020-07-04 23:20:53">2020-07-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%88%91%E5%9B%A2/">我团</a></span></div><div class="content"> 书生不可以没有，但空谈误国！
不可以空谈，但是要有向往！！！
少年中国有希望！
</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/#content-inner">10</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/15.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">云若无</div><div class="author-info__description">还记得自己的梦想吗？！！！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">91</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">62</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yunruowu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yunruow" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:mcdxwan@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/07/26/ToDo%E8%AE%A1%E5%88%92/" title="ToDo计划"><img src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ToDo计划"/></a><div class="content"><a class="title" href="/2021/07/26/ToDo%E8%AE%A1%E5%88%92/" title="ToDo计划">ToDo计划</a><time datetime="2021-07-26T15:57:50.000Z" title="发表于 2021-07-26 23:57:50">2021-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/24/%E5%B7%A5%E5%85%B7%E4%B8%8E%E5%86%85%E5%AE%B9%E7%9A%84%E5%85%B3%E7%B3%BB/" title="工具与内容的关系"><img src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="工具与内容的关系"/></a><div class="content"><a class="title" href="/2021/07/24/%E5%B7%A5%E5%85%B7%E4%B8%8E%E5%86%85%E5%AE%B9%E7%9A%84%E5%85%B3%E7%B3%BB/" title="工具与内容的关系">工具与内容的关系</a><time datetime="2021-07-24T13:11:37.000Z" title="发表于 2021-07-24 21:11:37">2021-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/24/%E6%88%91%E7%9A%84%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="我的工具使用"><img src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我的工具使用"/></a><div class="content"><a class="title" href="/2021/07/24/%E6%88%91%E7%9A%84%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="我的工具使用">我的工具使用</a><time datetime="2021-07-24T12:57:14.000Z" title="发表于 2021-07-24 20:57:14">2021-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/24/%E5%BC%80%E5%A7%8B%E6%8F%90%E5%8D%87%E8%87%AA%E5%B7%B1%E7%9A%84%E5%86%99%E4%BD%9C%E8%83%BD%E5%8A%9B/" title="开始提升自己的写作能力"><img src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="开始提升自己的写作能力"/></a><div class="content"><a class="title" href="/2021/07/24/%E5%BC%80%E5%A7%8B%E6%8F%90%E5%8D%87%E8%87%AA%E5%B7%B1%E7%9A%84%E5%86%99%E4%BD%9C%E8%83%BD%E5%8A%9B/" title="开始提升自己的写作能力">开始提升自己的写作能力</a><time datetime="2021-07-24T12:55:45.000Z" title="发表于 2021-07-24 20:55:45">2021-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/21/%E4%B8%89%E4%B8%AA%E6%9C%88%E7%9A%84%E8%AE%A1%E5%88%92/" title="三个月的计划"><img src="https://gitee.com/yunruowu/PictureForBolg/raw/master/img_1/20210723010851.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="三个月的计划"/></a><div class="content"><a class="title" href="/2021/07/21/%E4%B8%89%E4%B8%AA%E6%9C%88%E7%9A%84%E8%AE%A1%E5%88%92/" title="三个月的计划">三个月的计划</a><time datetime="2021-07-20T16:41:31.000Z" title="发表于 2021-07-21 00:41:31">2021-07-21</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HiNA/"><span class="card-category-list-name">HiNA</span><span class="card-category-list-count">12</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HiNA/Papers/"><span class="card-category-list-name">Papers</span><span class="card-category-list-count">11</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HiNA/Papers/IB/"><span class="card-category-list-name">IB</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/HiNA/Papers/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/"><span class="card-category-list-name">拥塞控制</span><span class="card-category-list-count">6</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Interconnection-Networks/"><span class="card-category-list-name">Interconnection_Networks</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LeetCode/"><span class="card-category-list-name">LeetCode</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/BFRP/" style="font-size: 1.1em; color: #999">BFRP</a> <a href="/tags/BUG/" style="font-size: 1.1em; color: #999">BUG</a> <a href="/tags/Binary-Search/" style="font-size: 1.1em; color: #999">Binary_Search</a> <a href="/tags/C/" style="font-size: 1.2em; color: #999da3">C++</a> <a href="/tags/CRP/" style="font-size: 1.1em; color: #999">CRP</a> <a href="/tags/CRSP/" style="font-size: 1.1em; color: #999">CRSP</a> <a href="/tags/GitHub/" style="font-size: 1.1em; color: #999">GitHub</a> <a href="/tags/IB/" style="font-size: 1.1em; color: #999">IB</a> <a href="/tags/Interconnection-Networks/" style="font-size: 1.4em; color: #99a5b6">Interconnection_Networks</a> <a href="/tags/LHRP/" style="font-size: 1.1em; color: #999">LHRP</a> <a href="/tags/LeetCode/" style="font-size: 1.5em; color: #99a9bf">LeetCode</a> <a href="/tags/Leetcode/" style="font-size: 1.1em; color: #999">Leetcode</a> <a href="/tags/Linux/" style="font-size: 1.2em; color: #999da3">Linux</a> <a href="/tags/Omnet/" style="font-size: 1.1em; color: #999">Omnet++</a> <a href="/tags/PCRP/" style="font-size: 1.1em; color: #999">PCRP</a> <a href="/tags/SMSRP/" style="font-size: 1.1em; color: #999">SMSRP</a> <a href="/tags/SRP/" style="font-size: 1.1em; color: #999">SRP</a> <a href="/tags/STL/" style="font-size: 1.1em; color: #999">STL</a> <a href="/tags/Typora/" style="font-size: 1.3em; color: #99a1ac">Typora</a> <a href="/tags/Ubuntu/" style="font-size: 1.1em; color: #999">Ubuntu</a> <a href="/tags/c/" style="font-size: 1.1em; color: #999">c++</a> <a href="/tags/congestion/" style="font-size: 1.1em; color: #999">congestion</a> <a href="/tags/debug/" style="font-size: 1.1em; color: #999">debug</a> <a href="/tags/git%EF%BC%8C%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 1.1em; color: #999">git，小技巧</a> <a href="/tags/linux/" style="font-size: 1.1em; color: #999">linux</a> <a href="/tags/python/" style="font-size: 1.1em; color: #999">python</a> <a href="/tags/tail/" style="font-size: 1.1em; color: #999">tail</a> <a href="/tags/%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83/" style="font-size: 1.1em; color: #999">一点思考</a> <a href="/tags/%E5%85%B1%E4%BA%A7%E4%B8%BB%E4%B9%89/" style="font-size: 1.1em; color: #999">共产主义</a> <a href="/tags/%E5%86%85%E7%9C%81/" style="font-size: 1.1em; color: #999">内省</a> <a href="/tags/%E5%86%99%E4%BD%9C/" style="font-size: 1.1em; color: #999">写作</a> <a href="/tags/%E5%88%9D%E5%88%B0/" style="font-size: 1.1em; color: #999">初到</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 1.2em; color: #999da3">动态规划</a> <a href="/tags/%E5%8F%B6%E7%BB%8D%E7%BF%81/" style="font-size: 1.1em; color: #999">叶绍翁</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" style="font-size: 1.2em; color: #999da3">命令行</a> <a href="/tags/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/" style="font-size: 1.1em; color: #999">回溯算法</a> <a href="/tags/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/" style="font-size: 1.1em; color: #999">如何阅读一本书</a> <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 1.2em; color: #999da3">小技巧</a> <a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 1.1em; color: #999">小知识</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 1.1em; color: #999">工具使用</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">八月 2020</span><span class="card-archive-list-count">19</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">七月 2020</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">21</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">91</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">64k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-07-26T16:03:44.760Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 云若无</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/algolia.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "凡是过往;皆为序章".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '凡是过往;皆为序章'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><div class="aplayer no-destroy" data-id="8040016020" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>window.$crisp = [];
window.CRISP_WEBSITE_ID = "15a5d7e2-9e89-427a-9ca9-4fc594328dc2";
(function () {
  d = document;
  s = d.createElement("script");
  s.src = "https://client.crisp.chat/l.js";
  s.async = 1;
  d.getElementsByTagName("head")[0].appendChild(s);
})();
$crisp.push(["safe", true])

if (false) {
  $crisp.push(["do", "chat:hide"])
  $crisp.push(["on", "chat:closed", function() {
    $crisp.push(["do", "chat:hide"])
  }])
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      $crisp.push(["do", "chat:show"])
      $crisp.push(["do", "chat:open"])

    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      $crisp.push(["do", "chat:hide"])
    }
    function chatBtnShow () {
      $crisp.push(["do", "chat:show"])
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>